(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{8037:(e,s,r)=>{Promise.resolve().then(r.bind(r,6325))},6325:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>G});var t=r(5155),a=r(2115),l=r(814),n=r(7163),i=r(3473),o=r(4505),d=r(1290),c=r(1027),m=r(3463),u=r(9795);function x(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,u.QP)((0,m.$)(s))}let h=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground border border-secondary shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),f=a.forwardRef((e,s)=>{let{className:r,variant:a,size:l,asChild:n=!1,...i}=e,o=n?d.DX:"button";return(0,t.jsx)(o,{className:x(h({variant:a,size:l,className:r})),ref:s,...i})});f.displayName="Button";let p=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:x("rounded-xl border bg-card text-card-foreground shadow",r),...a})});p.displayName="Card";let g=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:x("flex flex-col space-y-1.5 p-6",r),...a})});g.displayName="CardHeader";let j=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:x("font-semibold leading-none tracking-tight",r),...a})});j.displayName="CardTitle";let N=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:x("text-sm text-muted-foreground",r),...a})});N.displayName="CardDescription";let v=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:x("p-6 pt-0",r),...a})});v.displayName="CardContent";let b=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:x("flex items-center p-6 pt-0",r),...a})});b.displayName="CardFooter";var y=r(9177);let w=a.forwardRef((e,s)=>{let{className:r,value:a,...l}=e;return(0,t.jsx)(y.bL,{ref:s,className:x("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",r),...l,children:(0,t.jsx)(y.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});w.displayName=y.bL.displayName;var k=r(5683),A=r(9124),z=r(8867),D=r(767),P=r(3518),C=r(6967),S=r(1773),q=r(4081);function F(e){let{correctAnswers:s,totalQuestions:r}=e,a=s/r*100,l=Math.round(a);return(0,t.jsx)(p,{className:"w-full",children:(0,t.jsxs)(v,{className:"space-y-4 p-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-4xl font-bold",children:[l,"%"]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[s," out of ",r," correct"]})]}),(0,t.jsx)("p",{className:"text-center font-medium",children:100===a?"Perfect score! Congratulations!":a>=80?"Great job! You did excellently!":a>=60?"Good effort! You're on the right track.":a>=40?"Not bad, but there's room for improvement.":"Keep practicing, you'll get better!"})]})})}function R(e){let{questions:s,userAnswers:r}=e,a=["A","B","C","D"];return(0,t.jsxs)(p,{className:"w-full",children:[(0,t.jsx)(g,{children:(0,t.jsx)(j,{className:"text-2xl font-bold",children:"Quiz Review"})}),(0,t.jsx)(v,{children:s.map((e,s)=>(0,t.jsxs)("div",{className:"mb-8 last:mb-0",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:e.question}),(0,t.jsx)("div",{className:"space-y-2",children:e.options.map((l,n)=>{let i=a[n],o=i===e.answer,d=i===r[s]&&!o;return(0,t.jsxs)("div",{className:"flex items-center p-4 rounded-lg ".concat(o?"bg-green-100 dark:bg-green-700/50":d?"bg-red-100 dark:bg-red-700/50":"border border-border"),children:[(0,t.jsx)("span",{className:"text-lg font-medium mr-4 w-6",children:i}),(0,t.jsx)("span",{className:"flex-grow",children:l}),o&&(0,t.jsx)(z.A,{className:"ml-2 text-green-600 dark:text-green-400",size:20}),d&&(0,t.jsx)(D.A,{className:"ml-2 text-red-600 dark:text-red-400",size:20})]},n)})})]},s))})]})}let _=e=>{let{question:s,selectedAnswer:r,onSelectAnswer:a,showCorrectAnswer:l}=e,n=["A","B","C","D"];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold leading-tight",children:s.question}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:s.options.map((e,i)=>(0,t.jsxs)(f,{variant:r===n[i]?"secondary":"outline",className:"h-auto py-6 px-4 justify-start text-left whitespace-normal ".concat(l&&n[i]===s.answer?"bg-green-600 hover:bg-green-700":l&&r===n[i]&&r!==s.answer?"bg-red-600 hover:bg-red-700":""),onClick:()=>a(n[i]),children:[(0,t.jsx)("span",{className:"text-lg font-medium mr-4 shrink-0",children:n[i]}),(0,t.jsx)("span",{className:"flex-grow",children:e}),l&&n[i]===s.answer||r===n[i]&&(0,t.jsx)(z.A,{className:"ml-2 shrink-0 text-white",size:20}),l&&r===n[i]&&r!==s.answer&&(0,t.jsx)(D.A,{className:"ml-2 shrink-0 text-white",size:20})]},i))})]})};function E(e){let{questions:s,clearPDF:r,title:l="Quiz"}=e,[n,i]=(0,a.useState)(0),[o,d]=(0,a.useState)(Array(s.length).fill(null)),[c,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(0);(0,a.useEffect)(()=>{let e=setTimeout(()=>{p(n/s.length*100)},100);return()=>clearTimeout(e)},[n,s.length]);let g=()=>{m(!0),x(s.reduce((e,s,r)=>e+(s.answer===o[r]?1:0),0))},j=s[n];return(0,t.jsx)("div",{className:"min-h-screen bg-background text-foreground",children:(0,t.jsxs)("main",{className:"container mx-auto px-4 py-12 max-w-4xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center text-foreground",children:l}),(0,t.jsxs)("div",{className:"relative",children:[!c&&(0,t.jsx)(w,{value:h,className:"h-1 mb-8"}),(0,t.jsxs)("div",{className:"min-h-[400px]",children:[" ",(0,t.jsx)(k.N,{mode:"wait",children:(0,t.jsx)(A.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1},transition:{duration:.3},children:c?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(F,{correctAnswers:null!=u?u:0,totalQuestions:s.length}),(0,t.jsx)("div",{className:"space-y-12",children:(0,t.jsx)(R,{questions:s,userAnswers:o})}),(0,t.jsxs)("div",{className:"flex justify-center space-x-4 pt-4",children:[(0,t.jsxs)(f,{onClick:()=>{d(Array(s.length).fill(null)),m(!1),x(null),i(0),p(0)},variant:"outline",className:"bg-muted hover:bg-muted/80 w-full",children:[(0,t.jsx)(S.A,{className:"mr-2 h-4 w-4"})," Reset Quiz"]}),(0,t.jsxs)(f,{onClick:r,className:"bg-primary hover:bg-primary/90 w-full",children:[(0,t.jsx)(q.A,{className:"mr-2 h-4 w-4"})," Try Another PDF"]})]})]}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)(_,{question:j,selectedAnswer:o[n],onSelectAnswer:e=>{if(!c){let s=[...o];s[n]=e,d(s)}},isSubmitted:c,showCorrectAnswer:!1}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,t.jsxs)(f,{onClick:()=>{n>0&&i(n-1)},disabled:0===n,variant:"ghost",children:[(0,t.jsx)(P.A,{className:"mr-2 h-4 w-4"})," Previous"]}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[n+1," / ",s.length]}),(0,t.jsxs)(f,{onClick:()=>{n<s.length-1?i(n+1):g()},disabled:null===o[n],variant:"ghost",children:[n===s.length-1?"Submit":"Next"," ",(0,t.jsx)(C.A,{className:"ml-2 h-4 w-4"})]})]})]})},c?"results":n)})]})]})]})})}var O=r(8173),Q=r.n(O);let T=e=>{let{children:s,...r}=e;return(0,t.jsx)(Q(),{...r,className:"text-blue-500 dark:text-blue-400 hover:underline",target:"_blank",children:s})};function G(){let[e,s]=(0,a.useState)([]),[r,d]=(0,a.useState)([]),[c,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),[h,y]=(0,a.useState)([]),z=e=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&c){l.oR.error("Safari does not support drag & drop. Please use the file picker.");return}let r=Array.from(e.target.files||[]),t=r.filter(e=>"application/pdf"===e.type&&e.size<=5242880);console.log(t),t.length!==r.length&&l.oR.error("Only PDF files under 5MB are allowed."),s(t)},D=e=>new Promise((s,r)=>{let t=new FileReader;t.readAsDataURL(e),t.onload=()=>s(t.result),t.onerror=e=>r(e)}),P=async r=>{r.preventDefault(),x(!0),y([]);try{let s=await Promise.all(e.map(async e=>({name:e.name,type:e.type,data:await D(e)}))),r=await fetch("https://pdf-to-quiz-generator-bay-two.vercel.app/api/generate-quiz",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:s})});if(!r.ok)throw Error("Failed to generate quiz");if(!r.body)throw Error("No response body received");let t=r.body.getReader(),a=new TextDecoder,l="";for(;;){let e;let{done:s,value:r}=await t.read();if(s){if(l)try{let e=JSON.parse(l);e.questions&&(y(e.questions),d(e.questions))}catch(e){console.warn("Failed to parse final buffer:",e)}break}l+=a.decode(r,{stream:!0});let n=0;for(;-1!==(e=l.indexOf("\n",n));){let s=l.slice(n,e).trim();if(n=e+1,s)try{let e=JSON.parse(s);e.questions&&(y(e.questions),4===e.questions.length&&d(e.questions))}catch(e){console.warn("Failed to parse line:",e)}}l=l.slice(n)}}catch(e){console.error("Error:",e),l.oR.error("Failed to generate quiz. Please try again."),s([])}finally{x(!1)}},C=h?h.length/4*100:0;return 4===r.length?(0,t.jsx)(E,{title:"PDF Quiz",questions:r,clearPDF:()=>{s([]),d([]),y([])}}):(0,t.jsxs)("div",{className:"min-h-[100dvh] w-full flex justify-center",onDragOver:e=>{e.preventDefault(),m(!0)},onDragExit:()=>m(!1),onDragEnd:()=>m(!1),onDragLeave:()=>m(!1),onDrop:e=>{e.preventDefault(),m(!1),console.log(e.dataTransfer.files),z({target:{files:e.dataTransfer.files}})},children:[(0,t.jsx)(k.N,{children:c&&(0,t.jsxs)(A.P.div,{className:"fixed pointer-events-none dark:bg-zinc-900/90 h-dvh w-dvw z-10 justify-center items-center flex flex-col gap-1 bg-zinc-100/90",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,t.jsx)("div",{children:"Drag and drop files here"}),(0,t.jsx)("div",{className:"text-sm dark:text-zinc-400 text-zinc-500",children:"(PDFs only)"})]})}),(0,t.jsxs)(p,{className:"w-full max-w-md h-full border-0 sm:border sm:h-fit mt-12",children:[(0,t.jsxs)(g,{className:"text-center space-y-6",children:[(0,t.jsxs)("div",{className:"mx-auto flex items-center justify-center space-x-2 text-muted-foreground",children:[(0,t.jsx)("div",{className:"rounded-full bg-primary/10 p-2",children:(0,t.jsx)(n.A,{className:"h-6 w-6"})}),(0,t.jsx)(i.A,{className:"h-4 w-4"}),(0,t.jsx)("div",{className:"rounded-full bg-primary/10 p-2",children:(0,t.jsx)(o.A,{className:"h-6 w-6"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j,{className:"text-2xl font-bold",children:"PDF Quiz Generator"}),(0,t.jsxs)(N,{className:"text-base",children:["Upload a PDF to generate an interactive quiz based on its content using the ",(0,t.jsx)(T,{href:"https://sdk.vercel.ai",children:"AI SDK"})," and"," ",(0,t.jsx)(T,{href:"https://sdk.vercel.ai/providers/ai-sdk-providers/google-generative-ai",children:"Google's Gemini Pro"}),"."]})]})]}),(0,t.jsx)(v,{children:(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative flex flex-col items-center justify-center border-2 border-dashed border-muted-foreground/25 rounded-lg p-6 transition-colors hover:border-muted-foreground/50",children:[(0,t.jsx)("input",{type:"file",onChange:z,accept:"application/pdf",className:"absolute inset-0 opacity-0 cursor-pointer"}),(0,t.jsx)(n.A,{className:"h-8 w-8 mb-2 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:e.length>0?(0,t.jsx)("span",{className:"font-medium text-foreground",children:e[0].name}):(0,t.jsx)("span",{children:"Drop your PDF here or click to browse."})})]}),(0,t.jsx)(f,{type:"submit",className:"w-full",disabled:0===e.length,children:u?(0,t.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{children:"Generating Quiz..."})]}):"Generate Quiz"})]})}),u&&(0,t.jsxs)(b,{className:"flex flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"w-full space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[Math.round(C),"%"]})]}),(0,t.jsx)(w,{value:C,className:"h-2"})]}),(0,t.jsx)("div",{className:"w-full space-y-2",children:(0,t.jsxs)("div",{className:"grid grid-cols-6 sm:grid-cols-4 items-center space-x-2 text-sm",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full ".concat(u?"bg-yellow-500/50 animate-pulse":"bg-muted")}),(0,t.jsx)("span",{className:"text-muted-foreground text-center col-span-4 sm:col-span-2",children:h?"Generating question ".concat(h.length+1," of 4"):"Analyzing PDF content"})]})})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[814,779,441,517,358],()=>s(8037)),_N_E=e.O()}]);